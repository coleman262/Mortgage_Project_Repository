Tableau Fannie Mae CPR Performance Dashboard Engineering 

Link to Tableau Data: https://public.tableau.com/views/FNMACPRDashboard/CPRDashboard?:language=en-US&publish=yes&:display_count=n&:origin=viz_share_link
 

Data:
1.	 Loan level data was extracted and cleaned from Fannie Mae performance website and loaded into a Postgres database on a local machine.  The data was consolidated into rep-lines for easier processing into Tableau and imported a CSV file to increase the speed of processing and reduce extract time versus Postgres.  

2.	The CSV files were then extracted into Tableau and connected by period, state, and wac categories.  

Dashboard Set-Up:
1.	The size of the dashboard was set at 1000x800 pixels with a floating container for the entire dashboard so the page can be resized.

2.	With in the main container, tiled containers were used for the individual sheets to allow for screen re-sizing.


Calculated Fields:
•	CPR utilizes a calculated field with the calculation spanning the pif (prepayment) table and fnma_loanhist table containing the entire dataset.  The calculation set to 1-(1-(pif/ending balance)*12).

•	Average loan balance is calculated by sum UPB divided by sum of LC (loan count).

•	WAC (weighted average coupon) is a dynamic calculated field with upb multiplied by wac and divided by filtered upb

•	Top 5 states were created by sorting the states by CPR in descending order.  Then parameter was created to show the steps for potential user defined range.  A set created to limit to the top 5 states.  A context filter was used for WAC, State, and Date due to order of operations of extract filters to pass the filters population correctly to the top 5 and not to exclude based on the extracts.  

•	Coupon moneyness was calculated at the loan level from the PMMS (primary mortgage market survey rate from Freddie Mac) by subtracting mortgage rate (minus g-fee) on the server side.  In Tableau, a sum if calculation utilized when the moneyness was equal or greater to 25bps incentive to refinance. 
